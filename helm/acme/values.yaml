# UI Service Configuration
ui:
  image:
    repository: acme
    tag: latest
  replicas: 2

# API Service Configuration
api:
  image:
    repository: acme-api
    tag: latest
  replicas: 2
  environment:
    - name: POSTGRES_URL
      value: "postgresql://postgres:postgres@postgres-primary.database.svc.cluster.local:5432/acme"
    - name: METRICS_URL
      value: "http://opentelemetry-collector.observability.svc.cluster.local:4318"

service:
  type: LoadBalancer
  port: 80

ingress:
  enabled: true
  className: nginx
  hosts:
    - host: www.acme.com
      paths:
        - path: /api
          pathType: Prefix
          service: acme-api
          port: http
        - path: /
          pathType: Prefix
          service: acme
          port: http

# Horizontal Pod Autoscaler
autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 10
  metrics:
    - type: Resource
      resource:
        name: cpu
        target:
          type: Utilization
          averageUtilization: 50
    - type: Resource
      resource:
        name: memory
        target:
          type: Utilization
          averageUtilization: 70

resources:
  requests:
    cpu: 100m
    memory: 128Mi
  limits:
    cpu: 500m
    memory: 512Mi
